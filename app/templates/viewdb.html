{% extends "base.html" %}

{% block head %}
	<title>Main Page</title>
	<script src="{{ url_for('static', filename='js/fuse.min.js') }}"></script>
	<script src="{{ url_for('static', filename='js/viewdb.js') }}"></script>
	<script src="{{ url_for('static', filename='js/filter.js') }}"></script>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/viewdb.css') }}">
{% endblock %}

{% block content %}
	<div id="actionsBlock">
		<h1> Basic Actions </h1>

		<div class="content-text">
			<form id="actionsForm">
				<select id="action-select" onchange="changeActionMeta(this)">
					<option value="sign-in"> Sign in to location </option>
					<option value="sign-out">Sign out </option>
					<option value="remove">  Remove from list </option>
					<option value="add">     Add new people to the list </option>
				</select>
				<span class="select-arrow"> </span>
				<br>

				<div id="signin-options">
					<hr>
					<span class="content-text"> Sign in to: </span>
					<select id="location-select">
						{% for location in locations %}A
							<option value="{{location.short}}"> {{location.long}} </option>
						{% endfor %}
					</select>
					<span class="select-arrow"> </span>
				</div>

				<div id="remove-confirm">
					<hr>
					<label> Are you sure? <input type="checkbox" id="yes-im-sure"> </label>
				</div>

				<div id="add-options">
					<hr>
					Initial location <br>
					<select id="add-location-select">
						<option value="Not Yet Set"> Don't set yet </option>
						{% for location in locations %}
						<option value="{{location.short}}"> {{location.long}} </option>
						{% endfor %}
					</select>
					<span class="select-arrow"> </span>
					<hr>
					<form id="add-list-form">
						<span id="add-list">
						</span>
						<span class="content-text"> <small>Empty entries will be ignored</small> </span>
						<input type="submit" value="+1" id="add-plus" onclick="javascript:appendNewEntry()"
					</form>
				</div>

				<hr>
				<input type="submit" name="submit-change" class="submit" value="Submit Action">
			</form>

			<span id="action-status" class="msg">
				<!--Left empty for js-->
			</span>
		</div>
	</div>


	<div id="visibilityBlock">
		<h1> What to Show </h1>

		<div class="content-text">
			<form id="visibilityForm">
				<label> ID Code    				<input type="checkbox"         onchange="setVisibility('id-col',this.checked)"> </label> <br>
				<label> First Name 				<input type="checkbox" checked onchange="setVisibility('fn-col',this.checked)"> </label> <br>
				<label> Last Name					<input type="checkbox" checked onchange="setVisibility('ln-col',this.checked)"> </label> <br>
				<label> Current Location	<input type="checkbox" checked onchange="setVisibility('lc-col',this.checked)"> </label> <br>
				<label> Notes							<input type="checkbox" checked onchange="setVisibility('nt-col',this.checked)"> </label> <br>

			</form>
		</div>
	</div>


	<div id="chart">
		<h1> All Camper Info </h1>

		<div class="content-text">
			Click on name or notes to edit.
			<span id="edit-save-message" class="msg">
				<!-- intentionally empty for js -->
			</span>
			<br><br>
		</div>

		<input type="text" id="filterbox" placeholder="Filter" onkeyup="filter(this.value, 'ordered')">
		
		<div id="chart-wrapper">
			<table>
				<thead>
					<th class="check"> <input id="select-all-box" type="checkbox" onchange="checkAll(this)"> </th>
					<th class="id-col"> ID </th>
					<th class="fn-col"> First Name</th>
					<th class="ln-col"> Last Name(s)</th>
					<th class="lc-col"> Location</th>
					<th class="nt-col"> Notes</th>
				</thead>
				<tbody>
					<form id="camperList">
						{% for camper in campers %}
						<tr id="{{camper.id}}">
							<td class="check"> <input type="checkbox" name="select-box" value="{{camper.id}}" onclick="normalCheck(this)"></td>
							<td class="id-col"> {{camper.id}} </td>
							<td class="fn-col editable" id="firstname"> {{camper.firstname}} </td>
							<td class="ln-col editable" id="lastname" > {{camper.lastname}} </td>
							<td class="lc-col"> {{camper.location}} </td>
							<td class="nt-col editable" id="note"    > {{camper.note}}</a> </td>
							<!--<a href="javascript:tableInput(notes, {{camper.id}}, this)">-->
						</tr>
						{% endfor %}
						<!-- This is here to slightly simplify the backend -->
						<input class="hidden" type="checkbox" name="select-box" value="">
					</form>
				</tbody>
			</table>
		</div>

		<div class="content-text msg">
			<br>
			Use the action bit at the top of the page to add people to the database.
		</div>
	</div>
{% endblock %}
